<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kruiswoordpuzzel: Gedrag in de Gang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: De applicatie heeft een duidelijke, tweedelige layout. Links staat het interactieve kruiswoordraadsel-rooster en rechts (of onderaan op mobiel) staan de lijsten met hints voor horizontale en verticale woorden. Deze structuur is intuÃ¯tief voor een puzzel: de gebruiker kan gemakkelijk de hints lezen en tegelijkertijd de antwoorden in het rooster invullen. Door op een hint te klikken, wordt het bijbehorende woord in het rooster geactiveerd, wat de gebruiksvriendelijkheid verhoogt. Knoppen onderaan bieden duidelijke acties zoals controleren, een hint vragen of de oplossing tonen, wat zorgt voor een complete interactieve leerervaring. -->
    <!-- Visualization & Content Choices: Het centrale element is het kruiswoordraadselrooster, gemaakt met HTML en Tailwind CSS Grid. Dit is de meest effectieve manier om de woorden en hun relaties visueel te organiseren. De interactiviteit (klikken, typen, controleren) wordt beheerd door vanilla JavaScript. Dit maakt de puzzel boeiend en biedt directe feedback. De hints worden in geordende HTML-lijsten getoond voor duidelijkheid. Deze keuzes zetten de statische tekst om in een dynamische en educatieve tool, zonder gebruik van externe grafische bibliotheken. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            background-color: #FDFBF8;
            font-family: 'Inter', sans-serif;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(10, minmax(0, 1fr));
            grid-template-rows: repeat(11, minmax(0, 1fr));
            gap: 2px;
            width: 100%;
            max-width: 500px;
            aspect-ratio: 10 / 11;
        }
        .grid-cell {
            width: 100%;
            height: 100%;
            background-color: #F3EFEA;
            position: relative;
            border-radius: 4px;
        }
        .grid-cell.active {
            background-color: #fff;
        }
        .grid-cell input {
            width: 100%;
            height: 100%;
            text-align: center;
            text-transform: uppercase;
            border: 2px solid transparent;
            background-color: #fff;
            font-weight: 600;
            color: #3D352E;
            caret-color: #E58A45;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        .grid-cell input:focus {
            outline: none;
            border-color: #E58A45;
            transform: scale(1.05);
            z-index: 10;
        }
        .grid-cell .number {
            position: absolute;
            top: 2px;
            left: 3px;
            font-size: 0.6rem;
            color: #786A5F;
            pointer-events: none;
        }
        .clue-list li {
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }
        .clue-list li.active-clue {
            background-color: #FCE8D9;
            color: #E58A45;
            font-weight: 600;
        }
         .grid-cell input.correct {
            background-color: #D1FAE5;
            color: #065F46;
            border-color: #6EE7B7;
        }
        .grid-cell input.incorrect {
            background-color: #FEE2E2;
            color: #991B1B;
            border-color: #FCA5A5;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="text-[#3D352E] p-4 sm:p-6 lg:p-8">

    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-[#2A2421]">Gedrag in de Gang</h1>
            <p class="text-md text-[#786A5F] mt-1">Vul de kruiswoordpuzzel in met de juiste woorden.</p>
        </header>

        <div id="intro-section" class="flex flex-col items-center justify-center p-8 bg-[#F3EFEA] rounded-lg shadow-md mb-8">
            <p class="text-lg font-semibold mb-4">Voer je naam in om de puzzel te starten.</p>
            <input type="text" id="name-input" placeholder="Je naam" class="px-4 py-2 rounded-lg border-2 border-transparent focus:border-[#E58A45] focus:outline-none transition-all w-full max-w-xs text-center">
            <button id="start-btn" class="mt-4 px-6 py-2 bg-[#E58A45] text-white font-semibold rounded-lg shadow-sm hover:bg-[#D9773B] transition-colors">Start de Puzzel</button>
        </div>

        <main id="puzzle-section" class="grid grid-cols-1 lg:grid-cols-3 gap-8 hidden">
            <div class="lg:col-span-2 flex justify-center items-center">
                <div id="crossword-grid" class="grid-container"></div>
            </div>
            
            <div class="space-y-6">
                <div>
                    <h2 class="text-xl font-bold mb-2 border-b-2 border-[#F3EFEA] pb-2">Horizontaal</h2>
                    <ul id="horizontal-clues" class="clue-list space-y-1 text-[#5A4D43]"></ul>
                </div>
                <div>
                    <h2 class="text-xl font-bold mb-2 border-b-2 border-[#F3EFEA] pb-2">Verticaal</h2>
                    <ul id="vertical-clues" class="clue-list space-y-1 text-[#5A4D43]"></ul>
                </div>
            </div>
        </main>
        
        <footer id="footer-buttons" class="mt-8 flex flex-wrap justify-center gap-4 hidden">
            <button id="check-btn" class="px-6 py-2 bg-[#E58A45] text-white font-semibold rounded-lg shadow-sm hover:bg-[#D9773B] transition-colors">Controleer</button>
            <button id="submit-btn" class="px-6 py-2 bg-[#786A5F] text-white font-semibold rounded-lg shadow-sm hover:bg-[#5A4D43] transition-colors">Indienen</button>
        </footer>
    </div>

    <script>
        const puzzleData = {
            width: 10,
            height: 11,
            words: [
                { id: 0, word: 'STAPPEN', clue: 'Het tegenovergestelde van rennen.', number: 2, orientation: 'H', x: 2, y: 1 },
                { id: 1, word: 'ROEPEN', clue: 'Gedrag dat je toont als je luid roept.', number: 4, orientation: 'H', x: 1, y: 4 },
                { id: 2, word: 'NETJES', clue: 'Je doet dit als je iemand respecteert.', number: 6, orientation: 'H', x: 4, y: 6 },
                { id: 3, word: 'ZACHTJES', clue: 'De snelheid van een slak.', number: 8, orientation: 'H', x: 0, y: 8 },
                { id: 4, word: 'GROETEN', clue: 'Wat je moet doen als je een oudere tegenkomt.', number: 10, orientation: 'H', x: 3, y: 10 },
                { id: 5, word: 'ZWIJGEN', clue: 'Wat je moet doen als je door de gangen loopt.', number: 1, orientation: 'V', x: 4, y: 0 },
                { id: 6, word: 'STIL', clue: 'Wat je bent als je fluistert.', number: 3, orientation: 'V', x: 2, y: 0 },
                { id: 7, word: 'RECHTOP', clue: 'De houding die je aanneemt als je niemand in de weg loopt.', number: 5, orientation: 'V', x: 1, y: 3 },
                { id: 8, word: 'RENNEN', clue: 'Wat je niet mag doen met je voeten.', number: 7, orientation: 'V', x: 7, y: 5 },
                { id: 9, word: 'RUSTIG', clue: 'De houding die je aanneemt om anderen niet te storen.', number: 9, orientation: 'V', x: 5, y: 6 },
            ]
        };

        const introSection = document.getElementById('intro-section');
        const nameInput = document.getElementById('name-input');
        const startBtn = document.getElementById('start-btn');
        const puzzleSection = document.getElementById('puzzle-section');
        const footerButtons = document.getElementById('footer-buttons');
        const gridElement = document.getElementById('crossword-grid');
        const horizontalCluesElement = document.getElementById('horizontal-clues');
        const verticalCluesElement = document.getElementById('vertical-clues');
        const checkBtn = document.getElementById('check-btn');
        const submitBtn = document.getElementById('submit-btn');
        
        let cells = [];
        let activeWordId = null;
        let userName = '';

        startBtn.addEventListener('click', () => {
            userName = nameInput.value.trim();
            if (userName) {
                introSection.classList.add('hidden');
                puzzleSection.classList.remove('hidden');
                footerButtons.classList.remove('hidden');
                initializePuzzle();
            } else {
                alert('Voer je naam in om te beginnen!');
            }
        });

        function initializePuzzle() {
            cells = Array(puzzleData.height).fill(null).map(() => Array(puzzleData.width).fill(null));
            
            for (let y = 0; y < puzzleData.height; y++) {
                for (let x = 0; x < puzzleData.width; x++) {
                    const cellDiv = document.createElement('div');
                    cellDiv.classList.add('grid-cell');
                    cellDiv.dataset.x = x;
                    cellDiv.dataset.y = y;
                    gridElement.appendChild(cellDiv);
                }
            }

            puzzleData.words.forEach(wordData => {
                let currentX = wordData.x;
                let currentY = wordData.y;

                for (let i = 0; i < wordData.word.length; i++) {
                    const cellIndex = currentY * puzzleData.width + currentX;
                    const cellDiv = gridElement.children[cellIndex];

                    if (!cells[currentY][currentX]) {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.dataset.x = currentX;
                        input.dataset.y = currentY;
                        input.dataset.wordIds = JSON.stringify([wordData.id]);
                        cellDiv.classList.add('active');
                        cellDiv.appendChild(input);
                        cells[currentY][currentX] = { element: input, wordIds: [wordData.id], char: wordData.word[i] };
                        
                        input.addEventListener('focus', () => handleFocus(wordData.id));
                        input.addEventListener('input', (e) => handleInput(e, wordData, i));
                        input.addEventListener('keydown', (e) => handleKeyDown(e, wordData, i));

                    } else {
                        const existingWordIds = JSON.parse(cells[currentY][currentX].element.dataset.wordIds);
                        existingWordIds.push(wordData.id);
                        cells[currentY][currentX].element.dataset.wordIds = JSON.stringify(existingWordIds);
                        cells[currentY][currentX].wordIds.push(wordData.id);
                    }

                    if (i === 0) {
                        const numberSpan = document.createElement('span');
                        numberSpan.textContent = wordData.number;
                        numberSpan.classList.add('number');
                        cellDiv.appendChild(numberSpan);
                    }

                    if (wordData.orientation === 'H') currentX++; else currentY++;
                }

                const clueLi = document.createElement('li');
                clueLi.innerHTML = `<strong>${wordData.number}.</strong> ${wordData.clue}`;
                clueLi.dataset.wordId = wordData.id;
                clueLi.onclick = () => handleFocus(wordData.id, true);
                if (wordData.orientation === 'H') {
                    horizontalCluesElement.appendChild(clueLi);
                } else {
                    verticalCluesElement.appendChild(clueLi);
                }
            });
        }
        
        function handleFocus(wordId, fromClue = false) {
            activeWordId = wordId;
            updateActiveHighlights();
            if (fromClue) {
                 const wordData = puzzleData.words.find(w => w.id === wordId);
                 cells[wordData.y][wordData.x].element.focus();
            }
        }

        function updateActiveHighlights() {
            document.querySelectorAll('.clue-list li').forEach(li => li.classList.remove('active-clue'));
            if (activeWordId !== null) {
                document.querySelector(`.clue-list li[data-word-id='${activeWordId}']`).classList.add('active-clue');
            }
        }

        function handleInput(e, wordData, charIndex) {
            const nextCharIndex = charIndex + 1;
            if (e.target.value && nextCharIndex < wordData.word.length) {
                let nextX = wordData.x;
                let nextY = wordData.y;
                if (wordData.orientation === 'H') {
                    nextX += nextCharIndex;
                } else {
                    nextY += nextCharIndex;
                }
                cells[nextY][nextX].element.focus();
            }
        }
        
        function handleKeyDown(e, wordData, charIndex) {
            if (e.key === 'Backspace' && !e.target.value && charIndex > 0) {
                const prevCharIndex = charIndex - 1;
                let prevX = wordData.x;
                let prevY = wordData.y;
                if (wordData.orientation === 'H') {
                    prevX += prevCharIndex;
                } else {
                    prevY += prevCharIndex;
                }
                cells[prevY][prevX].element.focus();
            }
        }

        checkBtn.addEventListener('click', () => {
             puzzleData.words.forEach(wordData => {
                let currentX = wordData.x;
                let currentY = wordData.y;
                for (let i = 0; i < wordData.word.length; i++) {
                    const cell = cells[currentY][currentX];
                    cell.element.classList.remove('correct', 'incorrect');
                    if(cell.element.value){
                        if (cell.element.value.toUpperCase() === wordData.word[i]) {
                           cell.element.classList.add('correct');
                        } else {
                           cell.element.classList.add('incorrect');
                        }
                    }
                    if (wordData.orientation === 'H') currentX++; else currentY++;
                }
            });
        });

        submitBtn.addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            html2canvas(document.getElementById('puzzle-section')).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                
                doc.setFontSize(16);
                doc.text(`Ingevulde Puzzel door: ${userName}`, 10, 10);
                doc.addImage(imgData, 'PNG', 10, 20, 180, 0);
                doc.save('ingediend_Kruiswoord.pdf');
            });
        });
    </script>
</body>
</html>
